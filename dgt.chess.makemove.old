
############################################################
# Executes chess move by robot arm (coordinate notation).
#
# % dgt.chess.makemove <move> <board-file>
#
# Example input moves:
#    g1f1 (simple move, if square f1 is empty)
#    g1f1 (capture move, if square f1 contains opponent piece)
#    e1g1 (kingside castle, need to move rook also: h1f1)
#    e1c1 (queenside castle, need to move rook also: a1d1)
############################################################

POSQUEEN[1]='251.039855957 266.236328125 143.030578613 180.130096436'
POSQUEEN[2]='257.098114014 265.619995117 138.533309937 180.130096436'
POSQUEEN[3]='262.748962402 262.281311035 132.19229126 180.130096436'
POSQUEEN[4]='268.845001221 262.28125 132.192108154 180.130096436'
POSQUEEN[5]='274.761260986 260.505187988 128.38458252 180.130096436'
POSQUEEN[6]='280.944610596 262.157775879 132.027450562 180.130096436'
POSQUEEN[7]='286.658660889 263.187683105 135.077056885 180.130096436'
POSQUEEN[8]='292.835357666 269.044311523 147.020721436 180.130096436'
POSQUEEN[9]='248.549163818 258.913757324 124.894638062 180.087356567'
POSQUEEN[10]='254.79548645 256.792663574 119.363586426 180.087356567'
POSQUEEN[11]='261.406585693 254.846572876 114.578231812 180.087356567'
POSQUEEN[12]='268.202545166 254.075775146 112.615150452 180.087356567'
POSQUEEN[13]='274.97668457 254.038467407 112.651473999 180.087356567'
POSQUEEN[14]='281.603973389 254.97958374 115.148254395 180.087356567'
POSQUEEN[15]='287.933929443 256.770507812 119.65020752 180.087356567'
POSQUEEN[16]='294.273895264 259.348693848 125.781845093 180.087356567'
POSQUEEN[17]='246.567428589 253.109954834 110.136726379 180.087356567'
POSQUEEN[18]='253.289627075 250.811019897 103.799621582 180.087356567'
POSQUEEN[19]='260.141418457 249.504577637 100.145225525 180.087356567'
POSQUEEN[20]='267.803649902 248.978210449 98.5807723999 180.087356567'
POSQUEEN[21]='275.525604248 248.944519043 98.6097793579 180.087356567'
POSQUEEN[22]='283.584899902 249.160736084 99.3987426758 180.087356567'
POSQUEEN[23]='290.589019775 250.675567627 103.552253723 180.087356567'
POSQUEEN[24]='297.257110596 252.673126221 108.772666931 180.087356567'
POSQUEEN[25]='243.141540527 248.035430908 96.0182723999 180.087356567'
POSQUEEN[26]='250.382339478 246.48348999 90.8111419678 180.087356567'
POSQUEEN[27]='258.808929443 245.267669678 86.735458374 180.087356567'
POSQUEEN[28]='267.75 244.332794189 83.2802810669 180.087356567'
POSQUEEN[29]='276.512390137 244.389831543 83.5608520508 180.087356567'
POSQUEEN[30]='284.940490723 245.041687012 85.8609466553 180.087356567'
POSQUEEN[31]='293.644744873 246.021377563 88.8945388794 180.087356567'
POSQUEEN[32]='300.940948486 247.274398804 94.5335083008 180.087356567'
POSQUEEN[33]='239.118331909 244.201843262 83.6501083374 180.087356567'
POSQUEEN[34]='247.446563721 243.751159668 79.1538162231 180.087356567'
POSQUEEN[35]='256.59487915 242.876937866 74.1132888794 180.087356567'
POSQUEEN[36]='266.976898193 242.512878418 72.026473999 180.087356567'
POSQUEEN[37]='277.748840332 242.511322021 72.0502090454 180.087356567'
POSQUEEN[38]='288.485290527 242.780853271 74.3221817017 180.087356567'
POSQUEEN[39]='297.092010498 243.505264282 78.0727615356 180.087356567'
POSQUEEN[40]='305.432769775 245.176849365 84.9589004517 180.087356567'
POSQUEEN[41]='234.049621582 242.415130615 74.3068466187 180.087356567'
POSQUEEN[42]='242.597183228 241.621566772 68.3684692383 180.087356567'
POSQUEEN[43]='253.788589478 241.863265991 63.9956130981 180.087356567'
POSQUEEN[44]='266.474487305 241.862487793 61.8925895691 180.087356567'
POSQUEEN[45]='279.940032959 241.862487793 62.1750106812 180.087356567'
POSQUEEN[46]='291.404968262 241.863464355 64.1847763062 180.087356567'
POSQUEEN[47]='302.274230957 242.22869873 68.6489334106 180.087356567'
POSQUEEN[48]='311.049957275 243.048431396 74.0916137695 180.087356567'
POSQUEEN[49]='227.174743652 242.186019897 66.4332122803 180.087356567'
POSQUEEN[50]='236.604309082 242.051849365 60.9457130432 180.087356567'
POSQUEEN[51]='249.821563721 242.372055054 55.2340927124 180.087356567'
POSQUEEN[52]='265.845581055 243.727432251 52.8784294128 180.087356567'
POSQUEEN[53]='282.254364014 243.714050293 53.1332130432 180.087356567'
POSQUEEN[54]='298.245635986 242.473327637 55.2654380798 180.087356567'
POSQUEEN[55]='309.233917236 242.181533813 60.0260848999 180.087356567'
POSQUEEN[56]='318.377624512 242.225280762 66.8638763428 180.087356567'
POSQUEEN[57]='217.007232666 240.02947998 57.9563560486 180.130096436'
POSQUEEN[58]='227.121078491 241.956817627 49.8131942749 180.130096436'
POSQUEEN[59]='241.99206543 244.35194397 45.7779388428 180.130096436'
POSQUEEN[60]='264.248382568 246.861312866 43.0523529053 180.130096436'
POSQUEEN[61]='288.87121582 246.58505249 43.0533294678 180.130096436'
POSQUEEN[62]='306.137054443 245.029769897 45.915145874 180.130096436'
POSQUEEN[63]='320.139923096 242.240615845 51.4553794861 180.130096436'
POSQUEEN[64]='328.178863525 240.651153564 58.8470802307 180.130096436'
POSKNIGHT[1]='251.372238159 267.165039062 143.596206665 180.130096436'
POSKNIGHT[2]='256.678405762 266.047058105 139.102935791 180.130096436'
POSKNIGHT[3]='262.228057861 263.794616699 134.216125488 180.130096436'
POSKNIGHT[4]='268.747467041 263.468261719 132.771987915 180.130096436'
POSKNIGHT[5]='274.637390137 263.467773438 132.771591187 180.130096436'
POSKNIGHT[6]='280.546630859 263.467651367 133.157623291 180.130096436'
POSKNIGHT[7]='286.448638916 265.72857666 138.018569946 180.130096436'
POSKNIGHT[8]='292.126251221 270.36505127 147.774139404 180.130096436'
POSKNIGHT[9]='248.611557007 258.344299316 123.215538025 180.087356567'
POSKNIGHT[10]='255.071334839 255.628204346 116.365829468 180.087356567'
POSKNIGHT[11]='261.519744873 254.041595459 112.373840332 180.087356567'
POSKNIGHT[12]='268.044342041 253.332992554 110.556945801 180.087356567'
POSKNIGHT[13]='274.89956665 253.289535522 110.551673889 180.087356567'
POSKNIGHT[14]='281.718170166 253.675384521 111.675788879 180.087356567'
POSKNIGHT[15]='288.251495361 255.305938721 115.894836426 180.087356567'
POSKNIGHT[16]='294.302276611 258.077209473 122.656066895 180.087356567'
POSKNIGHT[17]='246.40486145 252.394134521 107.783996582 180.087356567'
POSKNIGHT[18]='253.087188721 250.097351074 101.402450562 180.087356567'
POSKNIGHT[19]='260.296508789 248.74911499 97.6149520874 180.087356567'
POSKNIGHT[20]='267.704833984 248.178604126 95.826965332 180.087356567'
POSKNIGHT[21]='275.871307373 248.111419678 95.8360443115 180.087356567'
POSKNIGHT[22]='283.154418945 248.609649658 97.5259857178 180.087356567'
POSKNIGHT[23]='290.566619873 250.196762085 102.02217865 180.087356567'
POSKNIGHT[24]='297.134979248 251.846862793 106.651573181 180.087356567'
POSKNIGHT[25]='243.135681152 247.435531616 94.6606521606 180.087356567'
POSKNIGHT[26]='250.330535889 245.554779053 88.6489334106 180.087356567'
POSKNIGHT[27]='258.713104248 244.344329834 84.6151504517 180.087356567'
POSKNIGHT[28]='267.600982666 243.728118896 82.2300872803 180.087356567'
POSKNIGHT[29]='276.67175293 243.689727783 82.2487411499 180.087356567'
POSKNIGHT[30]='285.122009277 244.532806396 84.4383926392 180.087356567'
POSKNIGHT[31]='293.290893555 245.838653564 88.9439544678 180.087356567'
POSKNIGHT[32]='300.222869873 247.38494873 93.9979629517 180.087356567'
POSKNIGHT[33]='239.015045166 243.540512085 82.7026443481 180.087356567'
POSKNIGHT[34]='246.841903687 242.035140991 76.4662246704 180.087356567'
POSKNIGHT[35]='256.271026611 242.606231689 73.5686645508 180.087356567'
POSKNIGHT[36]='266.849365234 242.415420532 71.6907348633 180.087356567'
POSKNIGHT[37]='277.024230957 242.276351929 70.7539138794 180.087356567'
POSKNIGHT[38]='287.712188721 242.560440063 73.3402481079 180.087356567'
POSKNIGHT[39]='296.588012695 243.179672241 76.7514724731 180.087356567'
POSKNIGHT[40]='305.452087402 244.76600647 83.5541152954 180.087356567'
POSKNIGHT[41]='232.981948853 242.373519897 73.7501068115 180.087356567'
POSKNIGHT[42]='242.652572632 241.621673584 67.7466888428 180.087356567'
POSKNIGHT[43]='253.356613159 241.249786377 63.1401481628 180.087356567'
POSKNIGHT[44]='265.725402832 241.71005249 61.0552825928 180.087356567'
POSKNIGHT[45]='279.066162109 241.710342407 61.708896637 180.087356567'
POSKNIGHT[46]='291.092712402 241.712875366 63.6629981995 180.087356567'
POSKNIGHT[47]='303.144287109 241.94354248 67.6131973267 180.087356567'
POSKNIGHT[48]='311.693695068 242.326553345 72.8142700195 180.087356567'
POSKNIGHT[49]='226.136825562 241.39793396 64.8516693115 180.087356567'
POSKNIGHT[50]='236.536636353 241.525482178 59.1232528687 180.087356567'
POSKNIGHT[51]='248.740341187 242.044525146 54.3785247803 180.087356567'
POSKNIGHT[52]='264.839141846 243.412780762 52.565536499 180.087356567'
POSKNIGHT[53]='281.58706665 243.637390137 53.0464935303 180.087356567'
POSKNIGHT[54]='297.736907959 242.549591064 54.1532325745 180.087356567'
POSKNIGHT[55]='309.534790039 242.075469971 58.7919044495 180.087356567'
POSKNIGHT[56]='318.409454346 241.998809814 65.2188568115 180.087356567'
POSKNIGHT[57]='215.678649902 242.182022095 59.0885848999 180.130096436'
POSKNIGHT[58]='226.321456909 244.190216064 52.4668083191 180.130096436'
POSKNIGHT[59]='241.058578491 246.917266846 47.1414146423 180.130096436'
POSKNIGHT[60]='262.442901611 249.392181396 44.7975692749 180.130096436'
POSKNIGHT[61]='286.996429443 249.392562866 44.7985458374 180.130096436'
POSKNIGHT[62]='305.031463623 247.192474365 48.7641716003 180.130096436'
POSKNIGHT[63]='319.516540527 244.704864502 52.8551864624 180.130096436'
POSKNIGHT[64]='327.797332764 244.705459595 61.719833374 180.130096436'
POSROOK[1]='251.205871582 270.688049316 148.719741821 180.086929321'
POSROOK[2]='256.665313721 267.409484863 141.164077759 180.086929321'
POSROOK[3]='262.672546387 264.95489502 135.495422363 180.086929321'
POSROOK[4]='268.464141846 265.031555176 135.494644165 180.086929321'
POSROOK[5]='274.580413818 264.40612793 134.549911499 180.086929321'
POSROOK[6]='280.819396973 265.064453125 135.542694092 180.086929321'
POSROOK[7]='286.646484375 267.268432617 140.657333374 180.086929321'
POSROOK[8]='292.330200195 269.977600098 147.073257446 180.086929321'
POSROOK[9]='248.646820068 262.024108887 127.339172363 180.087203979'
POSROOK[10]='255.169219971 259.046447754 119.690048218 180.087203979'
POSROOK[11]='261.646484375 257.406311035 115.524719238 180.087203979'
POSROOK[12]='268.374542236 256.672241211 113.657234192 180.087203979'
POSROOK[13]='275.349822998 256.65838623 113.786628723 180.087203979'
POSROOK[14]='282.200012207 257.667358398 116.556747437 180.087203979'
POSROOK[15]='288.380859375 259.055725098 119.865440369 180.087203979'
POSROOK[16]='294.512634277 261.784667969 126.665046692 180.087203979'
POSROOK[17]='246.636825562 254.434951782 108.787704468 180.087203979'
POSROOK[18]='253.150848389 252.581237793 103.22403717 180.087203979'
POSROOK[19]='260.191741943 251.281234741 99.4361419678 180.087203979'
POSROOK[20]='267.75378418 250.666778564 97.6146621704 180.087203979'
POSROOK[21]='275.472991943 250.626159668 97.5680770874 180.087203979'
POSROOK[22]='283.299743652 251.605453491 100.152259827 180.087203979'
POSROOK[23]='290.793182373 252.687774658 103.195907593 180.087203979'
POSROOK[24]='297.353851318 255.080352783 109.953620911 180.087203979'
POSROOK[25]='243.205535889 250.355255127 96.5001068115 180.087203979'
POSROOK[26]='250.756088257 248.69744873 90.6684646606 180.087203979'
POSROOK[27]='258.495178223 247.665618896 86.8802871704 180.087203979'
POSROOK[28]='267.578125 247.15272522 84.9505996704 180.087203979'
POSROOK[29]='276.362243652 247.15145874 84.9065551758 180.087203979'
POSROOK[30]='285.055480957 247.53163147 86.6491317749 180.087203979'
POSROOK[31]='293.290313721 248.514343262 90.2988357544 180.087203979'
POSROOK[32]='300.706573486 250.202911377 95.8330154419 180.087203979'
POSROOK[33]='238.91267395 246.821075439 83.606262207 180.087203979'
POSROOK[34]='247.024124146 245.741195679 78.6226654053 180.087203979'
POSROOK[35]='256.32421875 245.130264282 74.6390762329 180.087203979'
POSROOK[36]='266.971496582 244.848236084 72.6138763428 180.087203979'
POSROOK[37]='277.573516846 244.84715271 72.5950317383 180.087203979'
POSROOK[38]='287.76953125 245.085723877 75.110458374 180.087203979'
POSROOK[39]='297.083618164 245.702423096 78.7186660767 180.087203979'
POSROOK[40]='305.198852539 247.014343262 84.5737380981 180.087203979'
POSROOK[41]='233.672103882 245.136322021 74.3115310669 180.087203979'
POSROOK[42]='242.552963257 244.618057251 68.213684082 180.087203979'
POSROOK[43]='253.367874146 244.472351074 64.1951293945 180.087203979'
POSROOK[44]='266.205871582 244.619812012 62.5981559753 180.087203979'
POSROOK[45]='279.150848389 244.62020874 62.6005973816 180.087203979'
POSROOK[46]='292.082946777 244.199203491 64.0080184937 180.087203979'
POSROOK[47]='302.044555664 244.348327637 68.4669036865 180.087203979'
POSROOK[48]='310.760101318 245.092559814 74.6032333374 180.087203979'
POSROOK[49]='226.102355957 244.528213501 65.8795013428 180.087203979'
POSROOK[50]='236.42829895 244.709457397 60.1062583923 180.087203979'
POSROOK[51]='248.616149902 245.473327637 55.275302887 180.087203979'
POSROOK[52]='264.841339111 246.686798096 53.6895599365 180.087203979'
POSROOK[53]='281.321807861 247.011505127 52.9951286316 180.087203979'
POSROOK[54]='297.252868652 245.893447876 55.2470817566 180.087203979'
POSROOK[55]='309.647521973 244.01902771 60.3921966553 180.087203979'
POSROOK[56]='318.972198486 243.921859741 66.8075332642 180.087203979'
POSROOK[57]='217.279174805 243.041000366 59.372959137 180.086929321'
POSROOK[58]='226.9243927 244.711807251 52.9975700378 180.086929321'
POSROOK[59]='240.940139771 247.586608887 47.8345794678 180.086929321'
POSROOK[60]='262.894165039 249.543151855 44.505771637 180.086929321'
POSROOK[61]='286.616027832 250.292663574 45.6828231812 180.086929321'
POSROOK[62]='305.144287109 247.759262085 48.1317481995 180.086929321'
POSROOK[63]='320.030426025 245.034454346 53.5992279053 180.086929321'
POSROOK[64]='328.906005859 243.871078491 60.157333374 180.086929321'
POSBISHOP[1]='251.113967896 271.752929688 150.774047852 180.135513306'
POSBISHOP[2]='256.558135986 268.779296875 143.267791748 180.135513306'
POSBISHOP[3]='262.020904541 266.245422363 137.089660645 180.135513306'
POSBISHOP[4]='268.484130859 263.120117188 131.368652344 180.135513306'
POSBISHOP[5]='274.537567139 263.158508301 131.368377686 180.135513306'
POSBISHOP[6]='280.625 263.588867188 132.683319092 180.135513306'
POSBISHOP[7]='286.223907471 266.913970947 139.863006592 180.135513306'
POSBISHOP[8]='292.262969971 271.043762207 148.656738281 180.135513306'
POSBISHOP[9]='248.522171021 260.25390625 124.994934082 180.135513306'
POSBISHOP[10]='255.007461548 258.70614624 121.096885681 180.135513306'
POSBISHOP[11]='261.535949707 256.706359863 115.848640442 180.135513306'
POSBISHOP[12]='267.985046387 255.249313354 112.625595093 180.135513306'
POSBISHOP[13]='274.812133789 255.303909302 112.625396729 180.135513306'
POSBISHOP[14]='281.61315918 255.760452271 113.883895874 180.135513306'
POSBISHOP[15]='288.332611084 256.986053467 117.168365479 180.135513306'
POSBISHOP[16]='294.111206055 259.836425781 124.477058411 180.135513306'
POSBISHOP[17]='246.082366943 254.409957886 109.418663025 180.135513306'
POSBISHOP[18]='252.428878784 251.579788208 102.631164551 180.135513306'
POSBISHOP[19]='260.21472168 250.470504761 98.2723693848 180.135513306'
POSBISHOP[20]='268.038482666 249.995605469 96.9140701294 180.135513306'
POSBISHOP[21]='275.762756348 249.871688843 97.090637207 180.135513306'
POSBISHOP[22]='282.996551514 250.133895874 98.2795028687 180.135513306'
POSBISHOP[23]='290.023651123 251.821090698 102.914169312 180.135513306'
POSBISHOP[24]='296.930603027 253.751083374 108.031455994 180.135513306'
POSBISHOP[25]='243.144973755 249.896972656 96.1227645874 180.135513306'
POSBISHOP[26]='250.552154541 247.94102478 90.4455184937 180.135513306'
POSBISHOP[27]='258.434844971 246.469528198 85.8068466187 180.135513306'
POSBISHOP[28]='267.412109375 246.052734375 84.395614624 180.135513306'
POSBISHOP[29]='276.147277832 246.052841187 84.395904541 180.135513306'
POSBISHOP[30]='285.183135986 247.125976562 87.1617279053 180.135513306'
POSBISHOP[31]='293.452667236 247.980575562 90.3039169312 180.135513306'
POSBISHOP[32]='300.332366943 249.114456177 94.8989334106 180.135513306'
POSBISHOP[33]='239.189102173 246.254684448 84.0838012695 180.135513306'
POSBISHOP[34]='246.794799805 244.741409302 78.3589935303 180.135513306'
POSBISHOP[35]='256.388793945 244.003417969 74.4602661133 180.135513306'
POSBISHOP[36]='266.655426025 244.082229614 73.1519622803 180.135513306'
POSBISHOP[37]='277.277435303 244.268173218 73.157623291 180.135513306'
POSBISHOP[38]='287.218170166 244.601760864 75.3560638428 180.135513306'
POSBISHOP[39]='296.596954346 244.980758667 78.3527450562 180.135513306'
POSBISHOP[40]='305.144073486 246.008300781 84.1072387695 180.135513306'
POSBISHOP[41]='233.352127075 243.803817749 74.292098999 180.135513306'
POSBISHOP[42]='242.603622437 243.393066406 68.1275482178 180.135513306'
POSBISHOP[43]='253.288711548 242.538970947 62.594833374 180.135513306'
POSBISHOP[44]='267.101196289 243.442092896 61.9312591553 180.135513306'
POSBISHOP[45]='279.73815918 243.44229126 61.9323310852 180.135513306'
POSBISHOP[46]='291.677825928 243.530960083 63.8715896606 180.135513306'
POSBISHOP[47]='302.483673096 243.157333374 68.399230957 180.135513306'
POSBISHOP[48]='310.990112305 244.233596802 75.4030380249 180.135513306'
POSBISHOP[49]='226.055603027 243.387115479 66.3075256348 180.135513306'
POSBISHOP[50]='236.646591187 243.190917969 59.4045982361 180.135513306'
POSBISHOP[51]='249.047668457 244.557037354 54.8691482544 180.135513306'
POSBISHOP[52]='265.620635986 245.450302124 52.7163162231 180.135513306'
POSBISHOP[53]='281.934387207 245.445220947 52.7168045044 180.135513306'
POSBISHOP[54]='297.033538818 244.754196167 56.0970802307 180.135513306'
POSBISHOP[55]='309.627624512 243.294342041 60.0615310669 180.135513306'
POSBISHOP[56]='318.250793457 243.294631958 66.2163162231 180.135513306'
POSBISHOP[57]='217.011474609 243.169921875 59.4730567932 180.135513306'
POSBISHOP[58]='227.562255859 244.925979614 52.8207130432 180.135513306'
POSBISHOP[59]='241.948181152 247.703811646 47.9699287415 180.135513306'
POSBISHOP[60]='261.784790039 249.980865479 45.1689529419 180.135513306'
POSBISHOP[61]='286.264343262 249.615722656 45.1691474915 180.135513306'
POSBISHOP[62]='305.152923584 247.756057739 48.1304779053 180.135513306'
POSBISHOP[63]='319.548248291 244.842483521 53.2232513428 180.135513306'
POSBISHOP[64]='328.131988525 243.563583374 59.8794021606 180.135513306'
POSKING[1]='250.162094116 268.339660645 147.449432373 180.092330933'
POSKING[2]='256.12097168 264.299713135 138.633026123 180.092330933'
POSKING[3]='261.973907471 261.654785156 133.051391602 180.092330933'
POSKING[4]='268.059051514 261.195220947 131.941040039 180.092330933'
POSKING[5]='274.046966553 261.195220947 131.94152832 180.092330933'
POSKING[6]='280.3956604 262.247650146 134.499633789 180.092330933'
POSKING[7]='285.839599609 263.161621094 136.852264404 180.092330933'
POSKING[8]='291.905212402 267.097869873 145.15713501 180.092330933'
POSKING[9]='248.4087677 258.968841553 125.870910645 180.09147644'
POSKING[10]='254.967941284 255.856735229 118.336334229 180.09147644'
POSKING[11]='261.70690918 254.075485229 114.01348877 180.09147644'
POSKING[12]='268.317443848 253.362213135 112.154891968 180.09147644'
POSKING[13]='274.778594971 253.050003052 112.106552124 180.09147644'
POSKING[14]='281.08706665 254.056747437 114.33770752 180.09147644'
POSKING[15]='287.893249512 255.99005127 119.280181885 180.09147644'
POSKING[16]='293.559173584 258.527832031 125.215538025 180.09147644'
POSKING[17]='245.639923096 251.834671021 109.043563843 180.09147644'
POSKING[18]='252.585357666 249.460739136 102.510070801 180.09147644'
POSKING[19]='259.540771484 248.082138062 98.8867263794 180.09147644'
POSKING[20]='267.032958984 247.466598511 97.0132904053 180.09147644'
POSKING[21]='274.880493164 247.458786011 97.128036499 180.09147644'
POSKING[22]='282.646697998 248.210739136 99.315536499 180.09147644'
POSKING[23]='289.909332275 249.848434448 103.864074707 180.09147644'
POSKING[24]='296.370391846 251.392974854 107.742881775 180.09147644'
POSKING[25]='242.403488159 246.980865479 95.6458129883 180.09147644'
POSKING[26]='249.551116943 245.153320312 90.1684646606 180.09147644'
POSKING[27]='258.062133789 243.890335083 85.9299926758 180.09147644'
POSKING[28]='266.924163818 243.244140625 83.8376083374 180.09147644'
POSKING[29]='275.474700928 243.197463989 83.6808700562 180.09147644'
POSKING[30]='284.739868164 243.801269531 86.0890731812 180.09147644'
POSKING[31]='292.337432861 245.073242188 90.0093841553 180.09147644'
POSKING[32]='300.190246582 246.569442749 94.721786499 180.09147644'
POSKING[33]='238.046401978 243.049911499 83.2089920044 180.09147644'
POSKING[34]='246.205764771 241.461914062 77.4179763794 180.09147644'
POSKING[35]='255.959671021 240.573043823 73.0507888794 180.09147644'
POSKING[36]='265.725280762 240.182128906 70.8983459473 180.09147644'
POSKING[37]='276.677612305 240.139938354 70.9439544678 180.09147644'
POSKING[38]='287.220336914 240.527542114 73.4764709473 180.09147644'
POSKING[39]='296.012756348 241.464553833 77.2243270874 180.09147644'
POSKING[40]='303.82019043 242.968170166 83.5229568481 180.09147644'
POSKING[41]='232.362472534 240.329788208 72.3466873169 180.09147644'
POSKING[42]='241.628555298 239.484863281 67.2528381348 180.09147644'
POSKING[43]='252.486541748 239.027938843 62.268661499 180.09147644'
POSKING[44]='264.509307861 238.930465698 59.611530304 180.09147644'
POSKING[45]='278.191619873 238.929977417 60.1219825745 180.09147644'
POSKING[46]='290.427368164 238.937011719 62.5154380798 180.09147644'
POSKING[47]='301.278717041 239.394439697 66.5023498535 180.09147644'
POSKING[48]='309.338348389 240.331344604 72.7261810303 180.09147644'
POSKING[49]='225.577545166 239.032424927 63.1165122986 180.09147644'
POSKING[50]='234.388778687 238.88369751 56.8857498169 180.09147644'
POSKING[51]='247.504241943 239.11328125 52.9973716736 180.09147644'
POSKING[52]='262.763092041 240.242477417 50.3971748352 180.09147644'
POSKING[53]='279.940368652 241.192672729 50.791217804 180.09147644'
POSKING[54]='298.063293457 239.580276489 53.0322341919 180.09147644'
POSKING[55]='310.013214111 238.742782593 57.2148513794 180.09147644'
POSKING[56]='319.104553223 239.076171875 64.0905303955 180.09147644'
POSKING[57]='215.772628784 238.889068604 57.436630249 180.092330933'
POSKING[58]='225.233795166 240.756057739 50.4169998169 180.092330933'
POSKING[59]='240.127639771 243.198348999 45.9110450745 180.092330933'
POSKING[60]='260.195068359 245.403030396 42.9128990173 180.092330933'
POSKING[61]='284.854431152 244.840438843 43.245223999 180.092330933'
POSKING[62]='303.169464111 243.120605469 46.3843841553 180.092330933'
POSKING[63]='317.3878479 240.717773438 50.9379959106 180.092330933'
POSKING[64]='326.799865723 239.445114136 58.6311607361 180.092330933'
POSPAWN[1]='0   '
POSPAWN[2]='0   '
POSPAWN[3]='0   '
POSPAWN[4]='0   '
POSPAWN[5]='0   '
POSPAWN[6]='0   '
POSPAWN[7]='0   '
POSPAWN[8]='0   '
POSPAWN[9]='249.161880493 263.420318604 127.136909485 180.086776733'
POSPAWN[10]='255.244262695 261.17578125 121.822753906 180.086776733'
POSPAWN[11]='261.924194336 259.579589844 117.542182922 180.086776733'
POSPAWN[12]='268.197265625 258.58203125 114.868743896 180.086776733'
POSPAWN[13]='275.427276611 258.546386719 114.941108704 180.086776733'
POSPAWN[14]='282.254608154 259.54083252 117.743255615 180.086776733'
POSPAWN[15]='288.589263916 260.776672363 120.640228271 180.086776733'
POSPAWN[16]='294.545959473 263.371765137 127.521774292 180.086776733'
POSPAWN[17]='246.641326904 257.243652344 111.644233704 180.086776733'
POSPAWN[18]='253.472885132 255.215332031 105.64276886 180.086776733'
POSPAWN[19]='260.578704834 253.947952271 101.841400146 180.086776733'
POSPAWN[20]='268.48449707 253.373046875 100.057128906 180.086776733'
POSPAWN[21]='276.129730225 253.343460083 100.169433594 180.086776733'
POSPAWN[22]='283.530334473 253.812210083 101.712791443 180.086776733'
POSPAWN[23]='290.912567139 254.849807739 104.855659485 180.086776733'
POSPAWN[24]='297.389953613 257.017883301 111.093353271 180.086776733'
POSPAWN[25]='243.328598022 252.588088989 97.6472625732 180.086776733'
POSPAWN[26]='250.400283813 250.994522095 91.8661117554 180.086776733'
POSPAWN[27]='258.811462402 249.925003052 87.8385696411 180.086776733'
POSPAWN[28]='268.18762207 249.49609375 85.9549789429 180.086776733'
POSPAWN[29]='276.685089111 249.495498657 86.0185546875 180.086776733'
POSPAWN[30]='285.610290527 249.923049927 87.9710922241 180.086776733'
POSPAWN[31]='293.628326416 250.904586792 91.8235321045 180.086776733'
POSPAWN[32]='300.911315918 251.941497803 97.2065429688 180.086776733'
POSPAWN[33]='239.352493286 249.334960938 85.7985305786 180.086776733'
POSPAWN[34]='247.276550293 247.965713501 79.8159179688 180.086776733'
POSPAWN[35]='256.624328613 247.391113281 75.9294891357 180.086776733'
POSPAWN[36]='267.388671875 247.190139771 74.0467758179 180.086776733'
POSPAWN[37]='277.689575195 247.188674927 73.9676742554 180.086776733'
POSPAWN[38]='288.144073486 247.356643677 76.4385681152 180.086776733'
POSPAWN[39]='297.592163086 248.055557251 80.047164917 180.086776733'
POSPAWN[40]='305.482421875 249.175872803 85.4895477295 180.086776733'
POSPAWN[41]='233.515396118 247.583877563 76.0230407715 180.086776733'
POSPAWN[42]='242.723464966 247.146484375 69.990234375 180.086776733'
POSPAWN[43]='253.72795105 247.060638428 66.0368118286 180.086776733'
POSPAWN[44]='266.712219238 247.249221802 64.0691375732 180.086776733'
POSPAWN[45]='279.729888916 247.249710083 64.2965774536 180.086776733'
POSPAWN[46]='291.854217529 247.246871948 66.3060531616 180.086776733'
POSPAWN[47]='302.16394043 247.106338501 70.4393539429 180.086776733'
POSPAWN[48]='311.103637695 247.002151489 75.7517547607 180.086776733'
POSPAWN[49]='226.223587036 247.347549438 68.101852417 180.086776733'
POSPAWN[50]='235.841918945 247.635940552 61.9570274353 180.086776733'
POSPAWN[51]='249.385696411 248.568069458 57.2712860107 180.086776733'
POSPAWN[52]='264.674194336 249.638870239 54.9306602478 180.086776733'
POSPAWN[53]='281.923706055 249.591110229 55.4337844849 180.086776733'
POSPAWN[54]='297.853057861 248.883590698 57.9321250916 180.086776733'
POSPAWN[55]='309.597198486 247.293457031 61.8050727844 180.086776733'
POSPAWN[56]='318.488983154 246.786514282 68.371383667 180.086776733'
POSPAWN[57]='0   '
POSPAWN[58]='0   '
POSPAWN[59]='0   '
POSPAWN[60]='0   '
POSPAWN[61]='0   '
POSPAWN[62]='0   '
POSPAWN[63]='0   '
POSPAWN[64]='0   '
POSHOVER[1]='251.735519409 258.831237793 147.002838135 180.086776733'
POSHOVER[2]='258.107757568 253.80027771 136.309280396 180.086776733'
POSHOVER[3]='264.315246582 251.550765991 131.575881958 180.086776733'
POSHOVER[4]='269.682678223 250.813262939 130.115142822 180.086776733'
POSHOVER[5]='276.802734375 251.289337158 131.220321655 180.086776733'
POSHOVER[6]='283.032043457 252.982803345 134.877441406 180.086776733'
POSHOVER[7]='285.403045654 253.817367554 136.641906738 180.086776733'
POSHOVER[8]='292.449676514 256.104858398 141.666122437 180.086776733'
POSHOVER[9]='249.873855591 251.225784302 123.500190735 180.086776733'
POSHOVER[10]='255.914871216 248.567764282 117.84198761 180.086776733'
POSHOVER[11]='262.576293945 245.85458374 111.648239136 180.086776733'
POSHOVER[12]='268.471618652 245.407516479 110.423728943 180.086776733'
POSHOVER[13]='274.700958252 244.005081177 107.233787537 180.086776733'
POSHOVER[14]='281.539764404 244.89491272 109.406440735 180.086776733'
POSHOVER[15]='288.108917236 246.452041626 113.019042969 180.086776733'
POSHOVER[16]='293.798034668 249.41317749 119.755661011 180.086776733'
POSHOVER[17]='246.5546875 242.650100708 104.236030579 180.086776733'
POSHOVER[18]='253.588119507 239.291595459 96.2344665527 180.086776733'
POSHOVER[19]='260.582855225 238.056045532 92.9426727295 180.086776733'
POSHOVER[20]='268.350311279 237.309768677 91.1274414062 180.086776733'
POSHOVER[21]='274.107299805 237.312393188 91.2141571045 180.086776733'
POSHOVER[22]='281.75769043 238.633300781 94.6391601562 180.086776733'
POSHOVER[23]='289.367645264 240.445999146 99.0406188965 180.086776733'
POSHOVER[24]='296.276428223 243.698532104 106.728805542 180.086776733'
POSHOVER[25]='244.577209473 237.040527344 90.7410125732 180.086776733'
POSHOVER[26]='251.164413452 234.733688354 84.6570281982 180.086776733'
POSHOVER[27]='259.224975586 232.853118896 79.4422836304 180.086776733'
POSHOVER[28]='267.580322266 232.251266479 77.7185516357 180.086776733'
POSHOVER[29]='274.805725098 231.913467407 76.7589797974 180.086776733'
POSHOVER[30]='284.139373779 233.003219604 80.1004867554 180.086776733'
POSHOVER[31]='291.20199585 234.912200928 85.2119140625 180.086776733'
POSHOVER[32]='297.87109375 237.035842896 90.7353515625 180.086776733'
POSHOVER[33]='240.177856445 232.255569458 78.0367126465 180.086776733'
POSHOVER[34]='249.116394043 230.186233521 71.6998977661 180.086776733'
POSHOVER[35]='259.043426514 228.967376709 67.76953125 180.086776733'
POSHOVER[36]='266.205322266 228.581634521 66.4489212036 180.086776733'
POSHOVER[37]='276.020904541 228.519332886 66.2230453491 180.086776733'
POSHOVER[38]='285.408782959 229.006835938 68.1902313232 180.086776733'
POSHOVER[39]='293.338470459 230.055267334 71.576461792 180.086776733'
POSHOVER[40]='302.404541016 231.6875 76.3489227295 180.086776733'
POSHOVER[41]='234.275390625 229.332611084 69.092086792 180.086776733'
POSHOVER[42]='244.323196411 227.085647583 61.0141563416 180.086776733'
POSHOVER[43]='254.625930786 226.140716553 56.7436485291 180.086776733'
POSHOVER[44]='266.974731445 225.719039917 54.5561485291 180.086776733'
POSHOVER[45]='279.000915527 225.689163208 54.6020469666 180.086776733'
POSHOVER[46]='288.2371521 225.970413208 56.5718727112 180.086776733'
POSHOVER[47]='300.247375488 227.231826782 62.0543899536 180.086776733'
POSHOVER[48]='309.44152832 228.221282959 65.340423584 180.086776733'
POSHOVER[49]='227.612823486 226.485549927 59.0047798157 180.086776733'
POSHOVER[50]='239.252655029 225.743743896 55.5050735474 180.086776733'
POSHOVER[51]='252.481048584 225.029495239 50.0501899719 180.086776733'
POSHOVER[52]='266.879272461 224.795501709 47.5674781799 180.086776733'
POSHOVER[53]='280.975646973 224.794921875 47.7595672607 180.086776733'
POSHOVER[54]='292.193481445 224.922943115 50.2538032532 180.086776733'
POSHOVER[55]='305.600189209 225.746871948 55.531539917 180.086776733'
POSHOVER[56]='316.949676514 227.141983032 61.7255821228 180.086776733'
POSHOVER[57]='220.714157104 217.653991699 51.1792068481 180.086776733'
POSHOVER[58]='231.018615723 216.114639282 43.4471740723 180.086776733'
POSHOVER[59]='248.456222534 217.909362793 41.6402435303 180.086776733'
POSHOVER[60]='267.371337891 220.76991272 41.4434661865 180.086776733'
POSHOVER[61]='283.854217529 222.45652771 41.4510803223 180.086776733'
POSHOVER[62]='299.247802734 222.535827637 44.4878997803 180.086776733'
POSHOVER[63]='313.904541016 222.789733887 47.5816497803 180.086776733'
POSHOVER[64]='323.303436279 224.554473877 57.1421966553 180.086776733'

NEUTRAL='273.87121582 190.305557251 47.2733459473 180.027954102'
#OFFBOARD='323.608581543 226.862213135 68.8834075928 180.073425293'
OFFBOARD='361.777252197 220.214141846 46.4110298157 180.086364746'

ord() { 
  LC_CTYPE=C printf '%d' "'$1" 
}

BOARD=`cat $2 | sed 's/ .*//' | sed 's/1/-/g' | sed 's/2/--/g' | sed 's/3/---/g' | sed 's/4/----/g' | sed 's/5/-----/g' | sed 's/6/------/g' | sed 's/7/-------/g' | sed 's/8/--------/g' | tr -d '/' | tr 'a-z' 'A-Z'` 

MOVE=$1

SOURCE=`echo $MOVE | awk '{printf("%s",substr($0,1,2))}'`
SOURCEFILE=`echo $MOVE | awk '{printf("%s",substr($0,1,1))}'`
SOURCERANK=`echo $MOVE | awk '{printf("%s",substr($0,2,1))}'`

DEST=`echo $MOVE | awk '{printf("%s",substr($0,3,2))}'`
DESTFILE=`echo $MOVE | awk '{printf("%s",substr($0,3,1))}'`
DESTRANK=`echo $MOVE | awk '{printf("%s",substr($0,4,1))}'`

RANKDIFF=`echo '('$DESTRANK'-'$SOURCERANK')' | bc`

############################################################
# Figure out what piece type is in source square
############################################################

A=`ord $SOURCEFILE`
B=`echo '('$A'-96)+((8-'$SOURCERANK')*8)-1' | bc`
SOURCEPIECE=${BOARD:$B:1}

############################################################
# Figure out piece type in destination square (or - if empty)
############################################################

A=`ord $DESTFILE`
B=`echo '('$A'-96)+((8-'$DESTRANK')*8)-1' | bc`
DESTPIECE=${BOARD:$B:1}

############################################################
# Convert SOURCE & TARGET algebraic to square indices (1-64)
############################################################

SOURCENUM=`awk '{if ($1=="'$SOURCE'") print NR}' positions.names`
DESTNUM=`awk '{if ($1=="'$DEST'") print NR}' positions.names`

############################################################
# Confirm
############################################################

echo 'SOURCE='$SOURCE'  DEST='$DEST
echo 'SOURCEPIECE='$SOURCEPIECE'  DESTPIECE='$DESTPIECE
echo 'SOURCENUM='$SOURCENUM'  DESTNUM='$DESTNUM

############################################################
# Prepare grippers
############################################################

rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -100 -100
rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- 70 70

############################################################
# If move is a capture, remove enemy piece first
############################################################

if [[ $DESTPIECE == "N" ]]; then
  SQUEEZE=25
else SQUEEZE=20
fi

if [[ $DESTPIECE != "-" ]]; then

  echo 'Move to '$DEST

  moveto ${POSHOVER[$DESTNUM]}
  if [[ $DESTPIECE == "K" ]]; then
    moveto ${POSKING[$DESTNUM]}
  elif [[ $DESTPIECE == "B" ]]; then
    moveto ${POSBISHOP[$DESTNUM]}
  elif [[ $DESTPIECE == "P" ]]; then
    moveto ${POSPAWN[$DESTNUM]}
  elif [[ $DESTPIECE == "Q" ]]; then
    moveto ${POSQUEEN[$DESTNUM]}
  elif [[ $DESTPIECE == "N" ]]; then
    moveto ${POSKNIGHT[$DESTNUM]}
  elif [[ $DESTPIECE == "R" ]]; then
    moveto ${POSROOK[$DESTNUM]}
  fi

  echo 'Pick up '$DESTPIECE

  rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- $SQUEEZE $SQUEEZE

  echo 'Move to bin'

  moveto ${POSHOVER[$DESTNUM]}
  moveto $OFFBOARD

  echo 'Loosen grip'

  rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -5 -5

  echo 'Drop piece'

  rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -20 -20

  echo 'Prepare grippers'

  rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -100 -100
  rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- 70 70
fi

############################################################
# Move piece from source to destination
############################################################

if [[ $SOURCEPIECE == "N" ]]; then
  SQUEEZE=25
else SQUEEZE=20
fi

echo 'Move to '$SOURCE

moveto ${POSHOVER[$SOURCENUM]}
if [[ $SOURCEPIECE == "K" ]]; then
  moveto ${POSKING[$SOURCENUM]}
elif [[ $SOURCEPIECE == "B" ]]; then
  moveto ${POSBISHOP[$SOURCENUM]}
elif [[ $SOURCEPIECE == "P" ]]; then
  moveto ${POSPAWN[$SOURCENUM]}
elif [[ $SOURCEPIECE == "Q" ]]; then
  moveto ${POSQUEEN[$SOURCENUM]}
elif [[ $SOURCEPIECE == "N" ]]; then
  moveto ${POSKNIGHT[$SOURCENUM]}
elif [[ $SOURCEPIECE == "R" ]]; then
  moveto ${POSROOK[$SOURCENUM]}
fi

echo 'Pick up '$SOURCEPIECE

rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- $SQUEEZE $SQUEEZE

echo 'Move to '$DEST' area'

moveto ${POSHOVER[$SOURCENUM]}

if [[ $RANKDIFF -gt 3 ]]; then
  moveto.134.2 ${POSHOVER[$DESTNUM]}
else moveto ${POSHOVER[$DESTNUM]}
fi

echo 'Loosen grip'

rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -4 -4

echo 'Lower piece'

if [[ $SOURCEPIECE == "K" ]]; then
  moveto ${POSKING[$DESTNUM]}
elif [[ $SOURCEPIECE == "B" ]]; then
  moveto ${POSBISHOP[$DESTNUM]}
elif [[ $SOURCEPIECE == "P" ]]; then
  moveto ${POSPAWN[$DESTNUM]}
elif [[ $SOURCEPIECE == "Q" ]]; then
  moveto ${POSQUEEN[$DESTNUM]}
elif [[ $SOURCEPIECE == "N" ]]; then
  moveto ${POSKNIGHT[$DESTNUM]}
elif [[ $SOURCEPIECE == "R" ]]; then
  moveto ${POSROOK[$DESTNUM]}
fi

echo 'Drop piece'

rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -20 -20

echo 'Record new position'

dgt.chess.getboard dgt.chess.nextpos

echo 'Move arm up'

moveto ${POSHOVER[$DESTNUM]}

############################################################
# If castle, also move rook.
############################################################

if [[ $1 == "e1g1" ]]; then
  dgt.chess.makemove h1f1 $2
fi

if [[ $1 == "e1c1" ]]; then
  dgt.chess.makemove a1d1 $2
fi

############################################################
# Move back to neutral position.
############################################################

moveto $NEUTRAL

echo 'Loosen grip'

rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -4 -4

echo 'Lower piece'

if [[ $SOURCEPIECE == "K" ]]; then
  moveto ${POSKING[$DESTNUM]}
elif [[ $SOURCEPIECE == "B" ]]; then
  moveto ${POSBISHOP[$DESTNUM]}
elif [[ $SOURCEPIECE == "P" ]]; then
  moveto ${POSPAWN[$DESTNUM]}
elif [[ $SOURCEPIECE == "Q" ]]; then
  moveto ${POSQUEEN[$DESTNUM]}
elif [[ $SOURCEPIECE == "N" ]]; then
  moveto ${POSKNIGHT[$DESTNUM]}
elif [[ $SOURCEPIECE == "R" ]]; then
  moveto ${POSROOK[$DESTNUM]}
fi

echo 'Drop piece'

rosrun kinova_demo fingers_action_client.py -r m1n4s200 percent -- -20 -20

echo 'Record new position'

dgt.chess.getboard dgt.chess.nextpos

echo 'Move arm up'

moveto ${POSHOVER[$DESTNUM]}

############################################################
# If castle, also move rook.
############################################################

if [[ $1 == "e1g1" ]]; then
  dgt.chess.makemove h1f1 $2
fi

if [[ $1 == "e1c1" ]]; then
  dgt.chess.makemove a1d1 $2
fi

############################################################
# Move back to neutral position.
############################################################

moveto $NEUTRAL

